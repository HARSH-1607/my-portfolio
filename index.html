<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Harsh – Portfolio</title>
  <meta name="description" content="Retro start console for Harsh's portfolio">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles/reset.css" />
  <link rel="stylesheet" href="styles/main.css" />
  <style>
    /* Start screen specific tweaks */
    .start-screen { min-height: 100vh; display: grid; place-items: center; padding: 0; position: relative; overflow: hidden; }
    .retro-stage { position: absolute; inset: 0; z-index: 0; } /* Removed pointer-events: none */
    
    .start-wrapper { position: relative; z-index: 10; width: min(980px, 94%); display: grid; gap: 1rem; padding: 1.5rem 0 3rem; }
    .start-banner { background: var(--card); border: 6px solid var(--accent-3); padding: 1rem; text-align: center; box-shadow: 0 10px 0 var(--shadow); }
    .start-banner h1 { font-size: clamp(1.8rem, 6vw, 3rem); color: #ffd87a; text-transform: uppercase; text-shadow: 0 4px 0 #7a6a2b; }
    .start-banner p { margin-top: 0.5rem; color: #9ed0da; font-size: 0.8rem; }

    .start-grid { display: grid; grid-template-columns: 260px 1fr; gap: 1rem; }
    @media (max-width: 820px) { .start-grid { grid-template-columns: 1fr; } }

    .menu-stack { background: var(--card); border: 4px dashed #82a7af; padding: 0.8rem; display: grid; gap: 0.5rem; }
    .menu-stack h3 { color: #9ed0da; font-size: 0.8rem; margin-bottom: 0.5rem; }
    .menu-btn { display: block; width: 100%; text-align: center; text-decoration: none; color: #001b16; border: 4px solid; padding: 0.8rem 0.6rem; box-shadow: 0 6px 0 #082a22; }
    .menu-btn--green { background: #8af5a6; border-color: #8af5a6; }
    .menu-btn--yellow { background: #ffd87a; border-color: #ffd87a; }
    .menu-btn--red { background: #ff9b8a; border-color: #ff9b8a; }

    .select-panel { background: var(--card); border: 4px dotted #ffd87a; padding: 0.8rem; }
    .select-list { list-style: none; padding: 0; margin: 0; display: grid; gap: 0.6rem; }
    .select-link { display: block; text-decoration: none; color: #ffd87a; border: 4px dashed #ffd87a; padding: 0.9rem 0.8rem; position: relative; }
    .select-link::before { content: '\25B6'; color: var(--accent); position: absolute; left: -1.2rem; top: 50%; transform: translateY(-50%); }
    .select-link:hover { background: rgba(255, 216, 122, 0.12); }

    .select-bar { display: grid; grid-template-columns: 40px 1fr 40px; align-items: center; gap: 0.6rem; margin-top: 0.8rem; }
    .chip { background: var(--card); border: 4px solid var(--accent); color: var(--accent); padding: 0.3rem 0.4rem; text-align: center; }
    .select-btn { text-align: center; background: #ffd87a; color: #1f2a2f; border: 4px solid #ffd87a; padding: 0.5rem 0.8rem; box-shadow: 0 6px 0 #7a6a2b; }
  </style>
</head>
<body>
  <div class="crt-overlay" aria-hidden="true"></div>
  <header class="site-header">
    <div class="container">
      <a href="index.html" class="logo">HARSH<span class="blink">_</span></a>
      <nav class="nav"></nav>
    </div>
  </header>

  <main class="start-screen">
    <div class="retro-stage" aria-hidden="true">
      <div class="pixel-art-background">
        <div class="pixel-stars-1"></div>
        <div class="pixel-stars-2"></div>
        <div class="pixel-moon"></div>
        <div class="pixel-cloud-1"></div>
        <div class="pixel-cloud-2"></div>
        <div class="pixel-mountains"></div>
      </div>
    </div>

    <div class="start-wrapper">
      <div class="start-banner">
        <h1>Start</h1>
        <p>New Game • Harsh's Portfolio</p>
      </div>

      <div class="start-grid">
        <div class="start-grid__left-col">
          <aside class="menu-stack">
            <h3>Menu</h3>
            <button id="btn-start" class="menu-btn menu-btn--green" type="button">Start</button>
            <a id="btn-resume" class="menu-btn menu-btn--yellow" href="Harsh_Resume.pdf" download>Download Resume</a>
          </aside>

          <aside class="guide-panel">
            <h3>How to Start</h3>
            <p>1. Use <strong>◀</strong> and <strong>▶</strong> to select a section.</p>
            <p>2. Press <strong>Select</strong> to confirm.</p>
            <p>3. Press <strong>Start</strong> to launch!</p>
          </aside>
        </div>
        <section class="select-panel">
          <ul class="select-list" id="select-list" data-index="0" data-confirmed="false">
            <li><a class="select-link" href="#" data-target="projects.html">› Projects</a></li>
            <li><a class="select-link" href="#" data-target="about.html">› About</a></li>
            <li><a class="select-link" href="#" data-target="skills.html">› Skills</a></li>
            <li><a class="select-link" href="#" data-target="contact.html">› Contact</a></li>
          </ul>
          <div class="select-bar">
            <button class="chip" id="arrow-left" type="button">◀</button>
            <button class="select-btn" id="btn-select" type="button">Select</button>
            <button class="chip" id="arrow-right" type="button">▶</button>
          </div>
        </section>
      </div>
    </div>
  </main>

  <footer class="site-footer">
    <div class="container">
      <p>© <span id="year"></span> Harsh. Built with love.</p>
    </div>
  </footer>

  <div id="loading-overlay">
    <div class="loading-body">
      <p class="loading-text">LOADING<span class="blink">...</span></p>
      <div class="progress-bar-container">
        <div class="progress-bar">
          <span class="segment segment-red"></span>
          <span class="segment segment-red"></span>
          <span class="segment segment-orange"></span>
          <span class="segment segment-orange"></span>
          <span class="segment segment-yellow"></span>
          <span class="segment segment-yellow"></span>
          <span class="segment segment-green"></span>
          <span class="segment segment-green"></span>
          <span class="segment segment-green"></span>
          <span class="segment segment-green"></span>
        </div>
      </div>
    </div>
  </div>

  <script src="/scripts/main.js"></script>
  
  <script>
    // --- NO 'DOMContentLoaded' WRAPPER ---
    // The script runs immediately, and all the HTML above already exists.
      
    // selection wiring
    const list = document.getElementById('select-list');
    const items = list ? Array.from(list.querySelectorAll('.select-link')) : [];
    const loadingOverlay = document.getElementById('loading-overlay');
    const segments = document.querySelectorAll('#loading-overlay .segment');
    const loadingText = document.querySelector('#loading-overlay .loading-text');

    function setIndex(i){
      if (!list) return;
      const idx = (i + items.length) % items.length;
      list.setAttribute('data-index', String(idx));
      items.forEach((a, j)=>{ a.style.background = j===idx ? 'rgba(255,216,122,0.18)' : 'transparent'; });
    }
    function setConfirmed(v){ if(list) list.setAttribute('data-confirmed', String(v)); }
    function resetSelectLabel(){ const selBtn = document.getElementById('btn-select'); if(selBtn) selBtn.textContent = 'Select'; }
    function isConfirmed(){ return list?.getAttribute('data-confirmed') === 'true'; }
    setIndex(0); setConfirmed(false);

    // disable direct link navigation
    items.forEach(a=>{
      a.addEventListener('click', (e)=>{ e.preventDefault(); });
    });

    document.getElementById('arrow-left')?.addEventListener('click', ()=>{
      const i = Number(list?.getAttribute('data-index')||0) - 1; setIndex(i); setConfirmed(false); resetSelectLabel();
    });
    document.getElementById('arrow-right')?.addEventListener('click', ()=>{
      const i = Number(list?.getAttribute('data-index')||0) + 1; setIndex(i); setConfirmed(false); resetSelectLabel();
    });
    document.getElementById('btn-select')?.addEventListener('click', ()=>{
      const i = Number(list?.getAttribute('data-index')||0);
      const label = items[i]?.textContent?.replace(/^[^\w]+\s*/, '') || 'Selected';
      document.getElementById('btn-select').textContent = `Selected: ${label}`;
      setConfirmed(true);
    });
    
    // This is the "Start" button listener
    document.getElementById('btn-start')?.addEventListener('click', ()=>{
      const i = Number(list?.getAttribute('data-index')||0);
      if (!isConfirmed()) { 
        document.getElementById('btn-select')?.classList.add('pulse'); 
        setTimeout(()=>document.getElementById('btn-select')?.classList.remove('pulse'), 600); 
        return; 
      }
      
      const target = items[i]?.getAttribute('data-target');
      
      if (target && loadingOverlay) {
    
        // Show the loading screen
        loadingOverlay.style.display = 'grid';
        
        // 1. Reset text
        if (loadingText) {
          loadingText.innerHTML = 'LOADING<span class="blink">...</span>';
        }

        // 2. Hide all segments instantly
        segments.forEach(segment => {
          segment.classList.remove('visible');
        });

        // 3. Animate segments one by one
        const totalDuration = 1500; // 1.5 seconds
        const segmentCount = segments.length;
        const delayPerSegment = totalDuration / segmentCount; // 1500 / 10 = 150ms delay

        for (let i = 0; i < segmentCount; i++) {
          setTimeout(() => {
            if (segments[i]) {
              segments[i].classList.add('visible');
            }
          }, i * delayPerSegment);
        }
        
        // 4. Wait for the *full animation* to finish, then go to the new page
        setTimeout(() => {
          window.location.href = target;
        }, totalDuration);

      } else if (target) {
        // Fallback
        window.location.href = target;
      }
    });

    // keyboard support
    document.addEventListener('keydown', (e)=>{
      if (e.key === 'ArrowLeft') document.getElementById('arrow-left')?.click();
      if (e.key === 'ArrowRight') document.getElementById('arrow-right')?.click();
      if (e.key === 'Enter') document.getElementById('btn-select')?.click();
      if (e.key === 'e') document.getElementById('btn-start')?.click();
    });

  </script>

</body>
</html>